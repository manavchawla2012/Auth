generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             BigInt           @id @default(autoincrement())
  firstName      String           @db.VarChar(100)
  lastName       String           @db.VarChar(100)
  email          String           @unique @db.VarChar(100)
  phone          String           @unique @db.VarChar(10)
  password       String           @db.VarChar(255)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  UseRoleMapping UseRoleMapping[]

  @@map("user")
}

model Roles {
  id               Int                @id @default(autoincrement())
  name             String             @unique @db.VarChar(100)
  display_name     String?            @db.VarChar(100)
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
  RolesPermissions RolesPermissions[]
  UseRoleMapping   UseRoleMapping[]

  @@map("roles")
}

model Permissions {
  id               Int                @id @default(autoincrement())
  name             String             @unique @db.VarChar(100)
  display_name     String?            @db.VarChar(100)
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
  RolesPermissions RolesPermissions[]

  @@map("permissions")
}

model RolesPermissions {
  id            Int         @id @default(autoincrement())
  roleId        Int
  role          Roles       @relation(fields: [rolesId], references: [id])
  permissionId  Int
  permission    Permissions @relation(fields: [permissionsId], references: [id])
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  rolesId       Int
  permissionsId Int

  @@map("roles_permissions")
}

model UseRoleMapping {
  id      BigInt @id @default(autoincrement())
  userId  BigInt
  user    User   @relation(fields: [userId], references: [id])
  roleId  Int
  role    Roles  @relation(fields: [rolesId], references: [id])
  rolesId Int

  @@map("user_role_mapping")
}
